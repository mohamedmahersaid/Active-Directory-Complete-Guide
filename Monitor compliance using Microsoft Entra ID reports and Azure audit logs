________________________________________
üîç Monitoring Compliance with Entra ID Reports & Azure Logs
________________________________________

üìà 1. Microsoft Entra ID Reports
You can access these from the Microsoft Entra admin center under Monitoring  Sign-ins or Monitoring  Audit logs.

‚úÖ Types of Reports
Sign-in Logs

Shows who signed in, from where, using which device.

Includes risk level (low, medium, high) if Identity Protection is enabled.

Audit Logs

Tracks changes to users, groups, roles, and directory configurations.

Useful for detecting unauthorized changes.

Risky Sign-ins  Users

Requires Azure AD Premium P2.

Flags users with compromised credentials or abnormal behavior.

________________________________________
üìä 2. Using Log Analytics  Sentinel for Advanced Compliance Monitoring
________________________________________

Integrate Entra ID logs with Azure Log Analytics for query-based analysis.

Use Azure Sentinel for SIEM integration, alerting, and long-term retention.

kusto
Copy
Edit
AuditLogs 
 where ActivityDisplayName == Add member to group 
 where Result == success
 project TimeGenerated, ActivityDisplayName, TargetResources, InitiatedBy

üì¨ 3. Alerts & Automation
Configure Alerts for specific actions (e.g., global admin role assigned).

Automate remediation via Logic Apps (e.g., notify or revoke session).




________________________________________
Step-by-Step: Monitor Compliance with Microsoft Entra ID
________________________________________
üìç Part 1: Accessing and Reviewing Entra Reports
üîπ Step 1: Sign in
Go to https://entra.microsoft.com.

Sign in using a Global Administrator or Security Reader account.

üîπ Step 2: Review Key Reports
Navigate to Monitoring > Sign-in logs or Monitoring > Audit logs.

Sign-in Logs

Check sign-in status, IP, device, location.

Use filters for time range, user, or application.

Audit Logs

View actions like user creation, group changes, and role assignments.

Filter by service, category, or activity.

________________________________________
üìç Part 2: Enable Diagnostic Settings to Export Logs
________________________________________
üîπ Step 1: Create Log Analytics Workspace
Go to https://portal.azure.com.

Navigate to Log Analytics Workspaces > + Create.

Set:

Subscription

Resource Group

Workspace Name

Region

üîπ Step 2: Configure Diagnostic Settings for Entra Logs
In the Microsoft Entra admin center, go to:
Monitoring > Diagnostic settings.

Click + Add diagnostic setting.

Name it: e.g., ExportEntraLogs.

Check these options:

AuditLogs

SignInLogs

(Optional) RiskyUsers, RiskDetections

Choose Send to Log Analytics workspace.

Select the workspace you just created.

Click Save.
________________________________________
üìç Part 3: Query Logs in Log Analytics
________________________________________
Use KQL (Kusto Query Language) in the Logs section:


// Example: List users added to privileged groups
AuditLogs
| where ActivityDisplayName == "Add member to role"
| where TargetResources has "Global Administrator"
| project TimeGenerated, InitiatedBy, TargetResources

// Example: Detect high-risk sign-ins
SignInLogs
| where RiskLevelAggregated == "high"
| project UserPrincipalName, RiskDetail, Location, IPAddress, DeviceDetail
üìç Part 4: Enable Alerts (Optional)
Go to Azure Monitor > Alerts > + New alert rule.

Set:

Resource: your Log Analytics workspace

Condition: Custom log search (e.g., suspicious login)

Action Group: Email, Teams notification, Logic App

Name and enable it.

üìç Part 5: (Optional) Integrate with Microsoft Sentinel
Enable Microsoft Sentinel on your workspace.

In Sentinel:

Connect Azure AD connector

Add Analytics Rules (e.g., impossible travel)

Enable Workbooks and Dashboards

Automate response via Playbooks


